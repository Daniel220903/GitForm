@model FormClick.ViewModels.ResponseVM

@{
    ViewData["Title"] = "Respuestas del formulario";
}

<div class="container mt-4">
    <h2 class="text-center">@Model.Title</h2>
    <p class="text-center">@Model.Description</p>
    <p class="text-center"><strong>Tema:</strong> @Model.Topic</p>
    <p class="text-center"><strong>Resultado:</strong> @Model.Score</p>

    <div class="mt-4">
        @foreach (var question in Model.Questions){
            var borderClass = question.IsCorrect ? "border-success border-3" : "border-danger border-3";
            var iconClass = question.IsCorrect ? "bi-check-circle-fill text-success" : "bi-x-circle-fill text-danger";

            <div class="card mb-3 @borderClass position-relative">
                <div class="card-body">
                    <div class="position-absolute top-0 end-0 p-2">
                        <i class="bi @iconClass" style="font-size: 1.5rem;"></i>
                    </div>
                    <h4 class="card-title">@question.Text</h4>

                    @if (question.Type == "true-false")
                    {
                        <p><strong>Opciones:</strong></p>
                        <ul class="list-unstyled">
                            <li style="@(question.SelectedAnswer == "Cierto" ? "font-weight: bold;" : "")">
                                <span class="badge bg-primary">Verdadero</span>
                                @if (question.SelectedAnswer == "Cierto")
                                {
                                    <span class="badge bg-dark ms-2">•</span>
                                }
                            </li>
                            <li style="@(question.SelectedAnswer == "Falso" ? "font-weight: bold;" : "")">
                                <span class="badge bg-danger">Falso</span>
                                @if (question.SelectedAnswer == "Falso")
                                {
                                    <span class="badge bg-dark ms-2">•</span>
                                }
                            </li>
                        </ul>
                    } else if (question.Type == "multiple-choice") {
                        <p><strong>Opciones:</strong></p>
                        <ul class="list-unstyled">
                            @foreach (var option in question.Options)
                            {
                                <li style="@(option.OptionId == question.SelectedOptionId ? "font-weight: bold;" : "")">
                                    <span class="badge bg-info">@option.Text</span>
                                    @if (option.OptionId == question.SelectedOptionId)
                                    {
                                        <span class="badge bg-dark ms-2">•</span>
                                    }
                                </li>
                            }
                        </ul>
                    } else if (question.Type == "open") {
                        <p><strong>Tu respuesta:</strong> @question.SelectedAnswer</p>
                    }
                </div>
            </div>
        }
    </div>

    <div class="text-center mt-4">
        <a href="http://localhost:5180/api/Template/showOwnTemplates" class="btn btn-secondary">Regresar</a>
    </div>
</div>
